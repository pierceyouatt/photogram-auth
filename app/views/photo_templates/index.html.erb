<h1>
  All photos
</h1>

<a href="/photos/new">
  Add Photo
</a>

<hr>

<table class="table">
  <tr>
    <th>
      ID
    </th>


    <th>
      Caption
    </th>


    <th>
      Image
    </th>


    <th>
      User
    </th>


    <th>
      Created at
    </th>

    <th>
      Updated at
    </th>

    <th>
      Comments
    </th>

    <th>
    </th>
  </tr>

  <% @photos.each do |photo| %>
  <tr>
    <td>
      <%= photo.id %>
    </td>


    <td>
      <%= photo.caption %>
    </td>


    <td>
      <img src="<%= photo.image %>">
    </td>


    <td>
      <%= User.find_by(id: photo.user_id).username %>
    </td>


    <td>
      <%= time_ago_in_words(photo.created_at) %> ago
    </td>

    <td>
      <%= time_ago_in_words(photo.updated_at) %> ago
    </td>
    <td>
      <% Comment.where(photo_id: photo.id).each do |comment| %>
      <p><%= comment.body %> - <%= User.find_by(id: comment.user_id).username %></p>
      <% end %>
    </td>
    <td>
      <a href="/photos/<%= photo.id %>">
        Show details
      </a>
    </td>
  </tr>
  <% end %>
</table>

<form action="/photos_comment" method="post">
  <div class="form-group">
    <label for="photo_id">
      Photo
    </label>
    <input type="text" id="photo_id" name="photo_id" class="form-control" value="2">
  </div>

  <!-- Label and input for body -->
  <div class="form-group">
    <label for="body">
      Body
    </label>
    <input id="body" name="body" class="form-control" rows="3" placeholder='Add a comment...'>
  </div>

  <!-- Label and input for user_id -->
    <input type="hidden" name="user_id" class="form-control" value="<%= current_user.id %>">

  <button class="btn btn-block btn-outline-secondary">
    Add Comment
  </button>
</form>
<% Comment.all.pluck(:body).each do |comment| %>
  <p><%= comment %></p>
<% end %>